{"version":3,"file":"redux-persist.js","sources":["../src/constants.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isPlainObject.js","../src/utils/isStatePlainEnough.js","../src/autoRehydrate.js","../src/utils/setImmediate.js","../src/defaults/asyncLocalStorage.js","../src/purgeStoredState.js","../node_modules/json-stringify-safe/stringify.js","../src/createPersistor.js","../src/createTransform.js","../src/getStoredState.js","../src/persistStore.js","../src/index.js"],"sourcesContent":["export const KEY_PREFIX = 'reduxPersist:'\nexport const REHYDRATE = 'persist/REHYDRATE'\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isPlainObject from 'lodash/isPlainObject'\n\nexport default function isStatePlainEnough (a) {\n  // isPlainObject + duck type not immutable\n  if (!a) return false\n  if (typeof a !== 'object') return false\n  if (typeof a.asMutable === 'function') return false\n  if (!isPlainObject(a)) return false\n  return true\n}\n","import { REHYDRATE } from './constants'\nimport isStatePlainEnough from './utils/isStatePlainEnough'\n\nexport default function autoRehydrate (config = {}) {\n  const stateReconciler = config.stateReconciler || defaultStateReconciler\n\n  return (next) => (reducer, initialState, enhancer) => {\n    let store = next(liftReducer(reducer), initialState, enhancer)\n    return {\n      ...store,\n      replaceReducer: (reducer) => {\n        return store.replaceReducer(liftReducer(reducer))\n      }\n    }\n  }\n\n  function liftReducer (reducer) {\n    let rehydrated = false\n    let preRehydrateActions = []\n    return (state, action) => {\n      if (action.type !== REHYDRATE) {\n        if (config.log && !rehydrated) preRehydrateActions.push(action) // store pre-rehydrate actions for debugging\n        return reducer(state, action)\n      } else {\n        if (config.log && !rehydrated) logPreRehydrate(preRehydrateActions)\n        rehydrated = true\n\n        let inboundState = action.payload\n        let reducedState = reducer(state, action)\n\n        return stateReconciler(state, inboundState, reducedState, config.log)\n      }\n    }\n  }\n}\n\nfunction logPreRehydrate (preRehydrateActions) {\n  const concernedActions = preRehydrateActions.slice(1)\n  if (concernedActions.length > 0) {\n    console.log(`\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\n      after rehydration:\n    `, concernedActions.length, concernedActions)\n  }\n}\n\nfunction defaultStateReconciler (state, inboundState, reducedState, log) {\n  let newState = {...reducedState}\n\n  Object.keys(inboundState).forEach((key) => {\n    // if initialState does not have key, skip auto rehydration\n    if (!state.hasOwnProperty(key)) return\n\n    // if initial state is an object but inbound state is null/undefined, skip\n    if (typeof state[key] === 'object' && !inboundState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.', key)\n      return\n    }\n\n    // if reducer modifies substate, skip auto rehydration\n    if (state[key] !== reducedState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.', key)\n      newState[key] = reducedState[key]\n      return\n    }\n\n    // otherwise take the inboundState\n    if (isStatePlainEnough(inboundState[key]) && isStatePlainEnough(state[key])) newState[key] = {...state[key], ...inboundState[key]} // shallow merge\n    else newState[key] = inboundState[key] // hard set\n\n    if (log) console.log('redux-persist/autoRehydrate: key `%s`, rehydrated to ', key, newState[key])\n  })\n  return newState\n}\n","const hasNativeSupport = typeof global !== 'undefined' && typeof global.setImmediate !== 'undefined'\nconst setImmediate = hasNativeSupport ? (fn, ms) => global.setImmediate(fn, ms) : (fn, ms) => setTimeout(fn, ms)\n\nexport default setImmediate\n","import setImmediate from '../utils/setImmediate'\n\nlet noStorage = () => { /* noop */ return null }\nif (process.env.NODE_ENV !== 'production') {\n  noStorage = () => {\n    console.error('redux-persist asyncLocalStorage requires a global localStorage object. Either use a different storage backend or if this is a universal redux application you probably should conditionally persist like so: https://gist.github.com/rt2zz/ac9eb396793f95ff3c3b')\n    return null\n  }\n}\n\nfunction _hasStorage (storageType) {\n  if (typeof window !== 'object' || !(storageType in window)) {\n    return false\n  }\n\n  try {\n    let storage = window[storageType]\n    const testKey = `redux-persist ${storageType} test`\n    storage.setItem(testKey, 'test')\n    storage.getItem(testKey)\n    storage.removeItem(testKey)\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') console.warn(`redux-persist ${storageType} test failed, persistence will be disabled.`)\n    return false\n  }\n  return true\n}\n\nfunction hasLocalStorage () {\n  return _hasStorage('localStorage')\n}\n\nfunction hasSessionStorage () {\n  return _hasStorage('sessionStorage')\n}\n\nfunction getStorage (type) {\n  if (type === 'local') {\n    return hasLocalStorage()\n      ? window.localStorage\n      : { getItem: noStorage, setItem: noStorage, removeItem: noStorage, getAllKeys: noStorage }\n  }\n  if (type === 'session') {\n    return hasSessionStorage()\n      ? window.sessionStorage\n      : { getItem: noStorage, setItem: noStorage, removeItem: noStorage, getAllKeys: noStorage }\n  }\n}\n\nexport default function (type, config) {\n  let storage = getStorage(type)\n  return {\n    getAllKeys: function (cb) {\n      return new Promise((resolve, reject) => {\n        try {\n          var keys = []\n          for (var i = 0; i < storage.length; i++) {\n            keys.push(storage.key(i))\n          }\n          setImmediate(() => {\n            cb && cb(null, keys)\n            resolve(keys)\n          })\n        } catch (e) {\n          cb && cb(e)\n          reject(e)\n        }\n      })\n    },\n    getItem (key, cb) {\n      return new Promise((resolve, reject) => {\n        try {\n          var s = storage.getItem(key)\n          setImmediate(() => {\n            cb && cb(null, s)\n            resolve(s)\n          })\n        } catch (e) {\n          cb && cb(e)\n          reject(e)\n        }\n      })\n    },\n    setItem (key, string, cb) {\n      return new Promise((resolve, reject) => {\n        try {\n          storage.setItem(key, string)\n          setImmediate(() => {\n            cb && cb(null)\n            resolve()\n          })\n        } catch (e) {\n          cb && cb(e)\n          reject(e)\n        }\n      })\n    },\n    removeItem (key, cb) {\n      return new Promise((resolve, reject) => {\n        try {\n          storage.removeItem(key)\n          setImmediate(() => {\n            cb && cb(null)\n            resolve()\n          })\n        } catch (e) {\n          cb && cb(e)\n          reject(e)\n        }\n      })\n    }\n  }\n}\n","import { KEY_PREFIX } from './constants'\n\nexport default function purgeStoredState (config, keys) {\n  const storage = config.storage\n  const keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : KEY_PREFIX\n\n  // basic validation\n  if (Array.isArray(config)) throw new Error('redux-persist: purgeStoredState requires config as a first argument (found array). An array of keys is the optional second argument.')\n  if (!storage) throw new Error('redux-persist: config.storage required in purgeStoredState')\n\n  if (typeof keys === 'undefined') { // if keys is not defined, purge all keys\n    return new Promise((resolve, reject) => {\n      storage.getAllKeys((err, allKeys) => {\n        if (err) {\n          if (process.env.NODE_ENV !== 'production') console.warn('redux-persist: error during purgeStoredState in storage.getAllKeys')\n          reject(err)\n        } else {\n          resolve(purgeStoredState(config, allKeys.filter((key) => key.indexOf(keyPrefix) === 0).map((key) => key.slice(keyPrefix.length))))\n        }\n      })\n    })\n  } else { // otherwise purge specified keys\n    return Promise.all(keys.map((key) => {\n      return storage.removeItem(`${keyPrefix}${key}`, warnIfRemoveError(key))\n    }))\n  }\n}\n\nfunction warnIfRemoveError (key) {\n  return function removeError (err) {\n    if (err && process.env.NODE_ENV !== 'production') { console.warn('Error storing data for key:', key, err) }\n  }\n}\n","exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n","import { KEY_PREFIX, REHYDRATE } from './constants'\nimport createAsyncLocalStorage from './defaults/asyncLocalStorage'\nimport purgeStoredState from './purgeStoredState'\nimport stringify from 'json-stringify-safe'\n\nexport default function createPersistor (store, config) {\n  // defaults\n  const serializer = config.serialize === false ? (data) => data : defaultSerializer\n  const deserializer = config.serialize === false ? (data) => data : defaultDeserializer\n  const blacklist = config.blacklist || []\n  const whitelist = config.whitelist || false\n  const transforms = config.transforms || []\n  const debounce = config.debounce || false\n  const keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : KEY_PREFIX\n\n  // pluggable state shape (e.g. immutablejs)\n  const stateInit = config._stateInit || {}\n  const stateIterator = config._stateIterator || defaultStateIterator\n  const stateGetter = config._stateGetter || defaultStateGetter\n  const stateSetter = config._stateSetter || defaultStateSetter\n\n  // storage with keys -> getAllKeys for localForage support\n  let storage = config.storage || createAsyncLocalStorage('local')\n  if (storage.keys && !storage.getAllKeys) {\n    storage.getAllKeys = storage.keys\n  }\n\n  // initialize stateful values\n  let lastState = stateInit\n  let paused = false\n  let storesToProcess = []\n  let timeIterator = null\n\n  store.subscribe(() => {\n    if (paused) return\n\n    let state = store.getState()\n\n    stateIterator(state, (subState, key) => {\n      if (!passWhitelistBlacklist(key)) return\n      if (stateGetter(lastState, key) === stateGetter(state, key)) return\n      if (storesToProcess.indexOf(key) !== -1) return\n      storesToProcess.push(key)\n    })\n\n    const len = storesToProcess.length\n\n    // time iterator (read: debounce)\n    if (timeIterator === null) {\n      timeIterator = setInterval(() => {\n        if ((paused && len === storesToProcess.length) || storesToProcess.length === 0) {\n          clearInterval(timeIterator)\n          timeIterator = null\n          return\n        }\n\n        let key = storesToProcess.shift()\n        let storageKey = createStorageKey(key)\n        let endState = transforms.reduce((subState, transformer) => transformer.in(subState, key), stateGetter(store.getState(), key))\n        if (typeof endState !== 'undefined') storage.setItem(storageKey, serializer(endState), warnIfSetError(key))\n      }, debounce)\n    }\n\n    lastState = state\n  })\n\n  function passWhitelistBlacklist (key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false\n    if (blacklist.indexOf(key) !== -1) return false\n    return true\n  }\n\n  function adhocRehydrate (incoming, options = {}) {\n    let state = {}\n    if (options.serial) {\n      stateIterator(incoming, (subState, key) => {\n        try {\n          let data = deserializer(subState)\n          let value = transforms.reduceRight((interState, transformer) => {\n            return transformer.out(interState, key)\n          }, data)\n          state = stateSetter(state, key, value)\n        } catch (err) {\n          if (process.env.NODE_ENV !== 'production') console.warn(`Error rehydrating data for key \"${key}\"`, subState, err)\n        }\n      })\n    } else state = incoming\n\n    store.dispatch(rehydrateAction(state))\n    return state\n  }\n\n  function createStorageKey (key) {\n    return `${keyPrefix}${key}`\n  }\n\n  // return `persistor`\n  return {\n    rehydrate: adhocRehydrate,\n    pause: () => { paused = true },\n    resume: () => { paused = false },\n    purge: (keys) => purgeStoredState({storage, keyPrefix}, keys)\n  }\n}\n\nfunction warnIfSetError (key) {\n  return function setError (err) {\n    if (err && process.env.NODE_ENV !== 'production') { console.warn('Error storing data for key:', key, err) }\n  }\n}\n\nfunction defaultSerializer (data) {\n  return stringify(data, null, null, (k, v) => {\n    if (process.env.NODE_ENV !== 'production') return null\n    throw new Error(`\n      redux-persist: cannot process cyclical state.\n      Consider changing your state structure to have no cycles.\n      Alternatively blacklist the corresponding reducer key.\n      Cycle encounted at key \"${k}\" with value \"${v}\".\n    `)\n  })\n}\n\nfunction defaultDeserializer (serial) {\n  return JSON.parse(serial)\n}\n\nfunction rehydrateAction (data) {\n  return {\n    type: REHYDRATE,\n    payload: data\n  }\n}\n\nfunction defaultStateIterator (collection, callback) {\n  return Object.keys(collection).forEach((key) => callback(collection[key], key))\n}\n\nfunction defaultStateGetter (state, key) {\n  return state[key]\n}\n\nfunction defaultStateSetter (state, key, value) {\n  state[key] = value\n  return state\n}\n","function createTransform (inbound, outbound, config = {}) {\n  let whitelist = config.whitelist || null\n  let blacklist = config.blacklist || null\n\n  function whitelistBlacklistCheck (key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return true\n    if (blacklist && blacklist.indexOf(key) !== -1) return true\n    return false\n  }\n\n  return {\n    in: (state, key) => !whitelistBlacklistCheck(key) && inbound ? inbound(state, key) : state,\n    out: (state, key) => !whitelistBlacklistCheck(key) && outbound ? outbound(state, key) : state\n  }\n}\n\nexport default createTransform\n","import { KEY_PREFIX } from './constants'\nimport createAsyncLocalStorage from './defaults/asyncLocalStorage'\n\nexport default function getStoredState (config, onComplete) {\n  let storage = config.storage || createAsyncLocalStorage('local')\n  const deserializer = config.serialize === false ? (data) => data : defaultDeserializer\n  const blacklist = config.blacklist || []\n  const whitelist = config.whitelist || false\n  const transforms = config.transforms || []\n  const keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : KEY_PREFIX\n\n  // fallback getAllKeys to `keys` if present (LocalForage compatability)\n  if (storage.keys && !storage.getAllKeys) storage = {...storage, getAllKeys: storage.keys}\n\n  let restoredState = {}\n  let completionCount = 0\n\n  storage.getAllKeys((err, allKeys) => {\n    if (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error in storage.getAllKeys')\n      complete(err)\n    }\n\n    let persistKeys = allKeys.filter((key) => key.indexOf(keyPrefix) === 0).map((key) => key.slice(keyPrefix.length))\n    let keysToRestore = persistKeys.filter(passWhitelistBlacklist)\n\n    let restoreCount = keysToRestore.length\n    if (restoreCount === 0) complete(null, restoredState)\n    keysToRestore.forEach((key) => {\n      storage.getItem(createStorageKey(key), (err, serialized) => {\n        if (err && process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err)\n        else restoredState[key] = rehydrate(key, serialized)\n        completionCount += 1\n        if (completionCount === restoreCount) complete(null, restoredState)\n      })\n    })\n  })\n\n  function rehydrate (key, serialized) {\n    let state = null\n\n    try {\n      let data = deserializer(serialized)\n      state = transforms.reduceRight((subState, transformer) => {\n        return transformer.out(subState, key)\n      }, data)\n    } catch (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err)\n    }\n\n    return state\n  }\n\n  function complete (err, restoredState) {\n    onComplete(err, restoredState)\n  }\n\n  function passWhitelistBlacklist (key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false\n    if (blacklist.indexOf(key) !== -1) return false\n    return true\n  }\n\n  function createStorageKey (key) {\n    return `${keyPrefix}${key}`\n  }\n\n  if (typeof onComplete !== 'function' && !!Promise) {\n    return new Promise((resolve, reject) => {\n      onComplete = (err, restoredState) => {\n        if (err) reject(err)\n        else resolve(restoredState)\n      }\n    })\n  }\n}\n\nfunction defaultDeserializer (serial) {\n  return JSON.parse(serial)\n}\n","import { REHYDRATE } from './constants'\nimport getStoredState from './getStoredState'\nimport createPersistor from './createPersistor'\nimport setImmediate from './utils/setImmediate'\n\nexport default function persistStore (store, config = {}, onComplete) {\n  // defaults\n  // @TODO remove shouldRestore\n  const shouldRestore = !config.skipRestore\n  if (process.env.NODE_ENV !== 'production' && config.skipRestore) console.warn('redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead')\n\n  let purgeKeys = null\n\n  // create and pause persistor\n  const persistor = createPersistor(store, config)\n  persistor.pause()\n\n  // restore\n  if (shouldRestore) {\n    setImmediate(() => {\n      getStoredState(config, (err, restoredState) => {\n        if (err) {\n          complete(err)\n          return\n        }\n        // do not persist state for purgeKeys\n        if (purgeKeys) {\n          if (purgeKeys === '*') restoredState = {}\n          else purgeKeys.forEach((key) => delete restoredState[key])\n        }\n        try {\n          store.dispatch(rehydrateAction(restoredState, err))\n        } finally {\n          complete(err, restoredState)\n        }\n      })\n    })\n  } else setImmediate(complete)\n\n  function complete (err, restoredState) {\n    persistor.resume()\n    onComplete && onComplete(err, restoredState)\n  }\n\n  return {\n    ...persistor,\n    purge: (keys) => {\n      purgeKeys = keys || '*'\n      return persistor.purge(keys)\n    }\n  }\n}\n\nfunction rehydrateAction (payload, error = null) {\n  return {\n    type: REHYDRATE,\n    payload,\n    error\n  }\n}\n","import autoRehydrate from './autoRehydrate'\nimport createPersistor from './createPersistor'\nimport createTransform from './createTransform'\nimport getStoredState from './getStoredState'\nimport persistStore from './persistStore'\nimport purgeStoredState from './purgeStoredState'\n\n// @TODO remove in v5\nconst deprecated = (cb, cb2, cb3) => {\n  console.error('redux-persist: this method of importing storages has been removed. instead use `import { asyncLocalStorage } from \"redux-persist/storages\"`')\n  if (typeof cb === 'function') cb()\n  if (typeof cb2 === 'function') cb2()\n  if (typeof cb3 === 'function') cb3()\n}\nconst deprecatedStorage = { getAllKeys: deprecated, getItem: deprecated, setItem: deprecated, removeItem: deprecated }\nconst storages = {\n  asyncLocalStorage: deprecatedStorage,\n  asyncSessionStorage: deprecatedStorage\n}\n\nexport { autoRehydrate, createPersistor, createTransform, getStoredState, persistStore, purgeStoredState, storages }\n"],"names":["KEY_PREFIX","REHYDRATE","Symbol","objectProto","hasOwnProperty","symToStringTag","nativeObjectToString","isStatePlainEnough","a","asMutable","isPlainObject","autoRehydrate","config","stateReconciler","defaultStateReconciler","next","reducer","initialState","enhancer","store","liftReducer","replaceReducer","rehydrated","preRehydrateActions","state","action","type","log","push","logPreRehydrate","inboundState","payload","reducedState","concernedActions","slice","length","newState","keys","forEach","key","babelHelpers.typeof","console","hasNativeSupport","global","setImmediate","fn","ms","setTimeout","noStorage","process","error","_hasStorage","storageType","window","storage","testKey","setItem","getItem","removeItem","e","warn","hasLocalStorage","hasSessionStorage","getStorage","localStorage","getAllKeys","sessionStorage","cb","Promise","resolve","reject","i","s","string","purgeStoredState","keyPrefix","undefined","Array","isArray","Error","err","allKeys","filter","indexOf","map","all","warnIfRemoveError","removeError","createPersistor","serializer","serialize","data","defaultSerializer","deserializer","defaultDeserializer","blacklist","whitelist","transforms","debounce","stateInit","_stateInit","stateIterator","_stateIterator","defaultStateIterator","stateGetter","_stateGetter","defaultStateGetter","stateSetter","_stateSetter","defaultStateSetter","createAsyncLocalStorage","lastState","paused","storesToProcess","timeIterator","subscribe","getState","subState","passWhitelistBlacklist","len","setInterval","shift","storageKey","createStorageKey","endState","reduce","transformer","in","warnIfSetError","adhocRehydrate","incoming","options","serial","value","reduceRight","interState","out","dispatch","rehydrateAction","setError","stringify","k","v","JSON","parse","collection","callback","Object","createTransform","inbound","outbound","whitelistBlacklistCheck","getStoredState","onComplete","restoredState","completionCount","persistKeys","keysToRestore","restoreCount","complete","serialized","rehydrate","persistStore","shouldRestore","skipRestore","purgeKeys","persistor","pause","resume","purge","deprecated","cb2","cb3","deprecatedStorage","storages"],"mappings":"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"}